function qty_limit(e,t){console.log("over limit");var n=document.getElementById(t).getElementsByClassName("product-removal")[0];if(!document.getElementById("warning")){var o=document.createElement("div");o.setAttribute("class","warning");var r=document.createTextNode("You can only order 10 units.");o.appendChild(r),n.parentNode.insertBefore(o,n.nextSibling)}return e}function remove_product(e){console.log("product removed"),remove(e,1);var t=document.getElementById(e).getElementsByClassName("row-subtotal")[0].innerHTML;console.log(t),update_order_totals(t,"minus");var n=document.querySelectorAll(".product").length;if(n<=1){document.getElementById("checkout-btn").disabled=!0,smoothscroll();var o=document.getElementById("notices"),r=document.createTextNode("You have no products in your basket.");o.setAttribute("class","notices red"),o.appendChild(r)}console.log(n)}function check_initial_totals(e){for(var t=0,n=document.getElementsByClassName("product"),o=0;o<n.length;o++){var r=n.item(o),a=r.querySelector("input").value;if(a>0){var i=a*r.getElementsByClassName("price")[0].getAttribute("data-price");t+=i,1==e&&(r.getElementsByClassName("row-subtotal")[0].innerHTML=money(i),r.getElementsByClassName("currency")[0].style.display="inline-block")}}update_order_totals(t),setTimeout(function(){remove("loading",0)},1e3)}function update_order_totals(e,t){var n=document.getElementById("order-subtotal").innerHTML||0,o=0;o="plus"==t?str2number(n)+e:"minus"==t?str2number(n)-str2number(e):e,document.getElementById("order-subtotal").innerHTML=money(o);var r=.2*o;document.getElementById("order-vat").innerHTML=money(r),document.getElementById("order-total").innerHTML=money(r+o);var a=document.getElementsByClassName("currency");for(i=0;i<a.length;i++)a[i].style.display="inline-block"}function update_price(e,t){priceUpdate=parseInt(e.find(".price").data("price"))*t,e.find(".subtotal span+span").html(money(priceUpdate))}function money(e){return Number(e).toLocaleString("en",{minimumFractionDigits:2})}function remove(e,t){var n=document.getElementById(e);1==t?(n.style.opacity="0",setTimeout(function(){n.remove()},500)):n.remove()}function str2number(e){var t=e.toString().replace(",","");return parseFloat(t)}function smoothscroll(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(smoothscroll),window.scrollTo(0,e-e/5))}window.onload=function(){check_initial_totals(1)},jQuery(document).ready(function(e){e(document).on("click",".qtyControl",function(t){t.preventDefault();var n=e(this).closest(".qty-group").find("input"),o=parseInt(n.val())||0,r=e(this).closest(".product");r.find(".subtotal .currency").is(":hidden")&&r.find(".subtotal .currency").show(),e(this).hasClass("add")?(e(this).prev().prev().hasClass("min-reach")&&(e(this).prev().prev().removeClass("max-reach"),e(this).prev().prev().attr("disabled",!1)),10==o?(e(this).addClass("max-reach").attr("disabled","disabled"),qty_limit(10,r.attr("id"))):(qtyUpdate=o<10?o+1:qty_limit(10,r.attr("id")),update_price(r,qtyUpdate),unit_price=r.find(".price").data("price"),update_order_totals(unit_price,"plus"))):e(this).hasClass("remove")?(e(this).next().next().hasClass("max-reach")&&(e(this).next().next().removeClass("max-reach"),e(this).next().next().attr("disabled",!1),e(this).closest(".qty").find(".warning").remove()),0==o?e(this).addClass("min-reach").attr("disabled","disabled"):(qtyUpdate=o>1?o-1:0,update_price(r,qtyUpdate),unit_price=r.find(".price").data("price"),update_order_totals(unit_price,"minus"))):qtyUpdate=o,n.val(qtyUpdate)}),e(document).on("click",".removeProduct",function(t){t.preventDefault(),remove_product(e(this).closest(".product").attr("id"))}),e(document).on("click",".checkoutBtn",function(t){t.preventDefault(),e(".product").each(function(){var t={product_id:e(this).data("id"),product_name:e(this).find("p .product-name").text(),product_price:e(this).find(".price").data("price"),product_qty:e(this).find(".qty").find("input[name='qty']").val(),product_row_subtotal:e(this).find(".subtotal").find(".row-subtotal").text()};console.log(t),e("#products-list").addClass("closed"),e("html, body").animate({scrollTop:0},"slow",function(){e(".notices").addClass("green").html("Thank you for your order. Please proceed to the next step.")})})})});
//# sourceMappingURL=../maps/app.js.map
