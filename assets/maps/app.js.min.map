{"version":3,"sources":["app.js"],"names":["qty_limit","limit","product_id","console","log","someElement","document","getElementById","getElementsByClassName","newElement","createElement","setAttribute","text","createTextNode","appendChild","parentNode","insertBefore","nextSibling","remove_product","id","remove","product_subtotal","innerHTML","update_order_totals","n_products","querySelectorAll","length","disabled","smoothscroll","element_notices","check_initial_totals","initial","subtotal","products","i","product","item","qty","querySelector","value","rowSubtotal","getAttribute","money","style","display","setTimeout","direction","current_value","new_total","str2number","vat","currencySpan","update_price","element","priceUpdate","parseInt","find","data","html","number","Number","toLocaleString","minimumFractionDigits","fade","opacity","n","new_number","toString","replace","parseFloat","currentScroll","documentElement","scrollTop","body","window","requestAnimationFrame","scrollTo","onload","jQuery","ready","$","on","e","preventDefault","qtyField","this","closest","current_qty","val","is","show","hasClass","prev","removeClass","attr","addClass","qtyUpdate","unit_price","next","each","product_name","product_price","product_qty","product_row_subtotal","animate"],"mappings":"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","file":"../scripts/app.js","sourcesContent":["//check initial checkout values and write to totals\nwindow.onload = function () { \n\tcheck_initial_totals(1); \n};\n\njQuery(document).ready(function($){\n\t\n\t//function on click qty stepper\n\t$(document).on(\"click\", \".qtyControl\", function(e) {\n\t\te.preventDefault();\n\t\t//find input in qty group\n\t\tvar qtyField = $(this).closest(\".qty-group\").find(\"input\");\n\t\t//get initial value or sets to 0\n\t\tvar current_qty = parseInt(qtyField.val()) || 0;\n\t\t//find product row\n\t\tvar product = $(this).closest(\".product\");\n\t\t//qty control step\n\t\tvar changeValue = 1;\n\n\t\t//display currency if not showing (first product iteration case)\n\t\tif(product.find(\".subtotal .currency\").is(\":hidden\")){ product.find(\".subtotal .currency\").show();}\n\n\t\t//check if stepper is sum\n\t\tif ($(this).hasClass(\"add\")) {\n\t\t\tif($(this).prev().prev().hasClass(\"min-reach\")){\n\t\t\t\t$(this).prev().prev().removeClass(\"max-reach\");\n\t\t\t\t$(this).prev().prev().attr(\"disabled\",false);\n\t\t\t}\t\t\t\n\t\t\tif(current_qty==10){\n\t\t\t\t$(this).addClass(\"max-reach\").attr(\"disabled\",\"disabled\");\n\t\t\t\tqty_limit(10,product.attr(\"id\"));\n\t\t\t}else{\n\t\t\t\t//add 1 or stop in 10\n\t\t\t\tqtyUpdate = current_qty < 10 ? (current_qty+changeValue) : qty_limit(10,product.attr(\"id\")); \n\t\t\t\t//update row price\n\t\t\t\tupdate_price(product,qtyUpdate);\n\t\t\t\tunit_price = product.find(\".price\").data(\"price\");\n\t\t\t\t//update totals\n\t\t\t\tupdate_order_totals(unit_price,'plus');\n\t\t\t}\n\t\t\t\n\n\t\t//check if stepper is subtraction\n\t\t} else if ($(this).hasClass(\"remove\")) {\n\t\t\tif($(this).next().next().hasClass(\"max-reach\")){\n\t\t\t\t$(this).next().next().removeClass(\"max-reach\");\n\t\t\t\t$(this).next().next().attr(\"disabled\",false);\n\t\t\t\t$(this).closest(\".qty\").find(\".warning\").remove();\n\t\t\t}\n\t\t\tif(current_qty==0){\n\t\t\t\t$(this).addClass(\"min-reach\").attr(\"disabled\",\"disabled\");\n\t\t\t}else{\n\t\t\t\t//remove 1 or stop in 0\n\t\t\t\tqtyUpdate = current_qty > 1 ? (current_qty-changeValue) : 0;\n\t\t\t\t//update row price\n\t\t\t\tupdate_price(product,qtyUpdate);\n\t\t\t\tunit_price = product.find(\".price\").data(\"price\");\n\t\t\t\t//update totals\n\t\t\t\tupdate_order_totals(unit_price,'minus');\n\t\t\t}\n\n\n\t\t\t\n\t\t\t\n\n\t\t//default case\n\t\t} else {\n\t\t\tqtyUpdate = current_qty;\n\t\t}\n\n\t\t//update the product row input value\n\t\tqtyField.val(qtyUpdate);\n\n\t});\n\n\t//remove product\n\t$(document).on(\"click\", \".removeProduct\", function(e){\n\t\te.preventDefault();\n\t\tvar rowProductId = $(this).closest(\".product\").attr(\"id\");\n\t\tremove_product(rowProductId);\n\n\t});\n\n\t//click checkout\n\t$(document).on(\"click\", \".checkoutBtn\", function(e){\n\t\te.preventDefault();\n\t\t//get all products\n\t\t$(\".product\").each(function(){\n\t\t\tvar product = {\n\t\t\t\tproduct_id : $(this).data(\"id\"),\n        \t\tproduct_name : $(this).find(\"p .product-name\").text(),\n        \t\tproduct_price : $(this).find(\".price\").data(\"price\"),\n        \t\tproduct_qty : $(this).find(\".qty\").find(\"input[name='qty']\").val(),\n        \t\tproduct_row_subtotal : $(this).find(\".subtotal\").find(\".row-subtotal\").text()\n\t\t\t};\n\t\t\t//display products in console when checkout button is clicked\n\t\t\tconsole.log(product);\n\t\n\t\t$(\"#products-list\").addClass(\"closed\");\n\t\t$(\"html, body\").animate({ scrollTop: 0 }, \"slow\", function(){\n\t\t\t$(\".notices\").addClass(\"green\").html(\"Thank you for your order. Please proceed to the next step.\");\t\n\t\t});\n\t\t\n        \t\n    \t});\n\t});\n\n\t//on key out ToDO\n\t/*\n\tAdd a way for all the checks to be done with user input\n\t*/\n\n});\n\nfunction qty_limit(limit,product_id){\n\tconsole.log(\"over limit\");\n\t//display customer notice\n\tvar product_row = document.getElementById(product_id);\n\tvar someElement = product_row.getElementsByClassName(\"product-removal\")[0];\n\n\tif(!document.getElementById(\"warning\")){\n\t\tvar newElement = document.createElement(\"div\");\n\t\tnewElement.setAttribute(\"class\", \"warning\");\n\t\tvar text = document.createTextNode(\"You can only order 10 units.\");\n\t\tnewElement.appendChild(text); \n\t\tsomeElement.parentNode.insertBefore(newElement, someElement.nextSibling);\n\t}\n\t//setTimeout(function(){remove('warning',0);}, 2000);\t\n\n\treturn limit;\n}\n\nfunction remove_product(id){\n\tconsole.log(\"product removed\");\n\t//remove product\n\tremove(id,1);\n\t//update totals\n\tvar product_row = document.getElementById(id);\n\tvar product_subtotal = product_row.getElementsByClassName(\"row-subtotal\")[0].innerHTML;\n\tconsole.log(product_subtotal);\n\tupdate_order_totals(product_subtotal,'minus');\n\tvar n_products = document.querySelectorAll('.product').length;\n\tif(n_products<=1){\n\t\tdocument.getElementById(\"checkout-btn\").disabled = true;\n\t\tsmoothscroll();\n\n\t\tvar element_notices = document.getElementById(\"notices\");\n\t\tvar text = document.createTextNode(\"You have no products in your basket.\");\n\n\t\telement_notices.setAttribute(\"class\", \"notices red\");\n\t\telement_notices.appendChild(text); \t\n\n\n\t}\n\tconsole.log(n_products);\n}\n\nfunction check_initial_totals(initial){\n\tvar subtotal = 0;\n\tvar products = document.getElementsByClassName('product');\n\n\t//loop through all products in document\n\tfor(var i = 0; i < products.length; i++){\n\t\tvar product = products.item(i);\n\t\t//get product quantity in row\n\t\tvar qty = product.querySelector('input').value;\n\n\t\tif(qty>0){\n\t\t\t//get product price\n\t\t\tvar price = product.getElementsByClassName('price')[0].getAttribute('data-price');\n\t\t\tvar rowSubtotal = qty*price;\n\n\t\t\t//store in order subtotal\n\t\t\tsubtotal = subtotal+rowSubtotal;\n\n\t\t\t//write to row only in initial iteration\n\t\t\tif(initial==1){\n\t\t\t\tproduct.getElementsByClassName('row-subtotal')[0].innerHTML = money(rowSubtotal);\n\t\t\t\tproduct.getElementsByClassName('currency')[0].style.display = 'inline-block';\n\t\t\t}\n\n\t\t}\n   \t\t\t\n\t}\n\n\tupdate_order_totals(subtotal);\n\n  \t//remove loader screen\n\tsetTimeout(function(){remove('loading',0);}, 1000);\t\n\n}\n\nfunction update_order_totals(subtotal,direction){\n\tvar current_value = document.getElementById('order-subtotal').innerHTML || 0;\n\tvar new_total = 0;\n\n\tif(direction==\"plus\"){\n\t\tnew_total = str2number(current_value) + subtotal;\n\t}else if(direction==\"minus\"){\n\t\tnew_total = str2number(current_value) - str2number(subtotal);\n\t}else{\n\t\tnew_total = subtotal;\n\t}\n\n\tdocument.getElementById('order-subtotal').innerHTML = money(new_total);\n\tvar vat = new_total*0.2;\n\tdocument.getElementById('order-vat').innerHTML = money(vat);\n\tdocument.getElementById('order-total').innerHTML = money(vat+new_total);\n\tvar currencySpan = document.getElementsByClassName('currency');\n  \tfor(i=0; i<currencySpan.length; i++) {\n    \tcurrencySpan[i].style.display = 'inline-block';\n  \t}\n}\n\n//update row price\nfunction update_price(element,qty){\n\tpriceUpdate = parseInt(element.find(\".price\").data(\"price\"))*qty;\n\telement.find(\".subtotal span+span\").html(money(priceUpdate));\n}\n\n//format money number\nfunction money(number){\n\tvar money = Number(number).toLocaleString(\"en\", {minimumFractionDigits: 2});\n\treturn money;\n}\n\n//remove element by id\nfunction remove(id,fade) {\n \tvar element = document.getElementById(id);\n \tif(fade==1){\n \t \telement.style.opacity = '0';\n\t\tsetTimeout(function(){element.remove();}, 500);\t\n \t}else{\n \t\telement.remove();\n \t}\n\n}\n\n//fix Locale string sum issue\nfunction str2number(n){\n\n\tvar new_number = n.toString().replace(',', '');\n\n\treturn parseFloat(new_number);\n\n}\n\n//Scroll to Top Javascript\nfunction smoothscroll(){\n    var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;\n    if (currentScroll > 0) {\n         window.requestAnimationFrame(smoothscroll);\n         window.scrollTo (0,currentScroll - (currentScroll/5));\n    }\n}"]}